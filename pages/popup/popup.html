<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8" />
    <title data-i18n="app_title">YT æš±ç¨±é‚„åŸåŠ©æ‰‹</title>
    <style>
      html {
        overflow: hidden; 
      }
      body {
        width: 300px; 
        margin: 0;
        padding: 10px;
        box-sizing: border-box;
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        font-size: 14px;
        color: #333;
        background-color: #f9f9f9;
        overflow: hidden;
      }
      
      /* éš±è— Chrome æ²è»¸ */
      body::-webkit-scrollbar { 
        display: none; 
      }

      .header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 10px;
        padding-bottom: 8px;
        border-bottom: 1px solid #ddd;
        flex-wrap: nowrap;
      }
      h1 {
        font-size: 15px;
        margin: 0 0 6px;
        color: #0f0f0f;
      }
      .badge {
        background: #e3f2fd;
        color: #1565c0;
        padding: 1px 6px;
        border-radius: 10px;
        font-size: 10px;
        vertical-align: middle;
      }
      .status-card {
        background: #f5f5f5;
        padding: 8px;
        border-radius: 6px;
        margin-bottom: 8px;
        text-align: center;
        border: 1px solid #eee;
      }
      .status-num {
        font-size: 16px;
        font-weight: bold;
        color: #2e7d32;
        display: block;
        margin-bottom: 2px;
      }
      .status-desc {
        color: #666;
        font-size: 11px;
      }
      
      /* è† å›Šå¼ä¿éšªçµ² UI */
      .fuse-container {
        display: none; /* é è¨­éš±è—ï¼Œåªæœ‰åœ¨ç†”æ–·æˆ– Debug æ¨¡å¼ä¸‹æ‰é¡¯ç¤º */
        gap: 8px;
        margin-bottom: 8px;
        justify-content: space-between;
      }
      
      /* é¡¯ç¤ºç‹€æ…‹çš„ Class */
      .fuse-container.show {
        display: flex;
      }
      
      .fuse-capsule {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 6px 4px;
        border-radius: 50px;
        border: 1px solid #ddd;
        background: #fff;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        user-select: none;
      }
      
      .fuse-capsule:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .fuse-capsule:active {
        transform: translateY(0);
      }

      /* æ­£å¸¸ç‹€æ…‹ (ç¶ è‰²) */
      .fuse-capsule.normal {
        border-color: #81c784;
        color: #2e7d32;
        background: #e8f5e9;
      }

      /* ç†”æ–·ç‹€æ…‹ (ç´…è‰²) */
      .fuse-capsule.tripped {
        border-color: #e57373;
        color: #c62828;
        background: #ffebee;
      }

      .fuse-icon {
        font-size: 12px;
      }
      
      .fuse-label {
        font-size: 11px;
        font-weight: 600;
      }

      .btn {
        width: 100%;
        padding: 7px;
        font-size: 12.5px;
        font-weight: 600;
        cursor: pointer;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #333;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 5px;
      }
      .btn:hover {
        background: #f0f0f0;
        border-color: #999;
      }

      .settings-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
      }
      .settings-input {
        width: 50px;
        padding: 2px;
        border: 1px solid #ccc;
        border-radius: 4px;
        text-align: center;
        font-size: 12px;
      }
      .settings-select {
        padding: 2px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 12px;
      }
      input[type="checkbox"] {
        cursor: pointer;
        width: 14px;
        height: 14px;
        margin: 0;
      }
      .btn-save {
        background: #4caf50;
        color: white;
        border: none;
        padding: 6px;
        font-size: 12px;
        margin-top: 6px;
        margin-bottom: 0;
      }
      .btn-save:hover {
        background: #43a047;
      }
      .footer-link {
        cursor: pointer;
        color: #999;
        font-size: 10px;
        text-decoration: none;
        font-family: monospace;
        transition: color 0.2s;
      }
      .footer-link:hover {
        color: #666;
        text-decoration: underline;
      }
      .footer-container {
        margin-top: 6px;
        text-align: center;
        border-top: 1px solid #eee;
        padding-top: 4px;
      }
    </style>
  </head>
  <body>
    <h1><span data-i18n="app_title">YT æš±ç¨±é‚„åŸåŠ©æ‰‹</span> <span class="badge" id="appVersion"></span></h1>

    <div class="status-card">
      <span id="countText" class="status-num">...</span>
      <span class="status-desc" data-i18n="cached_nicknames">å·²å¿«å–çš„æš±ç¨±</span>
    </div>

    <div class="status-card" style="text-align: left; padding-bottom: 6px">
      <div class="settings-row">
        <span data-i18n="lang_select">èªè¨€ (Language):</span>
        <select id="langSelect" class="settings-select">
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="ja">æ—¥æœ¬èª</option>
        </select>
      </div>
      <hr style="border:0; border-top:1px dashed #ccc; margin: 5px 0;">

      <div style="font-weight: bold; margin-bottom: 5px; font-size: 12px" data-i18n="preferences">
        åå¥½è¨­å®š
      </div>

      <div class="settings-row">
        <span data-i18n="max_length">åç¨±æœ€å¤§é•·åº¦:</span>
        <input type="number" id="maxLengthInput" class="settings-input" min="5" max="50" />
      </div>

      <div class="settings-row">
        <span data-i18n="ttl_days" data-i18n-title="ttl_days_title">éæœŸæ™‚é–“ (å¤©):</span>
        <input type="number" id="ttlDaysInput" class="settings-input" min="1" max="365" />
      </div>

      <div class="settings-row">
        <span data-i18n="del_days" data-i18n-title="del_days_title">åˆªé™¤æ™‚é–“ (å¤©):</span>
        <input type="number" id="deleteDaysInput" class="settings-input" min="7" max="365" />
      </div>

      <div class="settings-row">
        <span data-i18n="click_copy" data-i18n-title="click_copy_title">é»æ“Šè¤‡è£½é€£çµ:</span>
        <input type="checkbox" id="clickToCopyInput" />
      </div>

      <div class="settings-row">
        <span data-i18n="show_log" data-i18n-title="show_log_title">é¡¯ç¤ºé™¤éŒ¯ç´€éŒ„ (Log):</span>
        <input type="checkbox" id="debugModeInput" />
      </div>

      <div class="settings-row">
        <span data-i18n="fetch_speed" data-i18n-title="speed_title">æŠ“å–é »ç‡:</span>
        <select id="fetchSpeedSelect" class="settings-select">
          <option value="NORMAL" data-i18n="speed_normal">æ™®é€š (é è¨­)</option>
          <option value="SLOW" data-i18n="speed_slow">æ…¢é€Ÿ (å®‰å…¨æ¨¡å¼)</option>
        </select>
      </div>

      <button id="saveSettingsBtn" class="btn btn-save" data-i18n="save_settings">
        å„²å­˜è¨­å®š (éœ€é‡æ–°æ•´ç†)
      </button>
    </div>

    <!-- ä¿éšªçµ²æ§åˆ¶å€å¡Š (é è¨­éš±è—) -->
    <div id="fuseContainer" class="fuse-container">
      <!-- å¾Œç«¯ä¿éšªçµ² (çˆ¬èŸ²) -->
      <div id="fuseBackendCapsule" class="fuse-capsule normal" title="Loading...">
        <span class="fuse-icon">âš¡</span>
        <span class="fuse-label" data-i18n="fuse_be_title">Backend</span>
      </div>

      <!-- å‰ç«¯ä¿éšªçµ² (UI) -->
      <div id="fuseFrontendCapsule" class="fuse-capsule normal" title="Loading...">
        <span class="fuse-icon">ğŸ–¥ï¸</span>
        <span class="fuse-label" data-i18n="fuse_fe_title">Frontend</span>
      </div>
    </div>

    <button id="openManagerBtn" class="btn" data-i18n="open_manager">ğŸ“‹ é–‹å•Ÿå¿«å–ç®¡ç†é é¢</button>

    <button id="openManualBtn" class="btn" data-i18n="manual" style="border-color: #bbdefb; color: #1565c0; background: #e3f2fd;">
      ğŸ“– ä½¿ç”¨èªªæ˜æ›¸
    </button>

    <div class="footer-container">
      <span id="openReadmeBtn" class="footer-link" data-i18n="about_log">ğŸ“œ é—œæ–¼ & ä¿®æ”¹ç´€éŒ„</span>
      <span style="margin: 0 5px; color: #ddd;">|</span>
      <span id="openTwitterBtn" class="footer-link" style="color: #1da1f2;" data-i18n="report_issue">ğŸ¦ å›å ±å•é¡Œ</span>
    </div>

    <script src="../../js/shared/config.js"></script>
    <script src="../../js/shared/utils.js"></script>
    <script src="../../js/shared/locales.js"></script>
    <script src="../../js/shared/i18n.js"></script>
    <script src="popup.js"></script>
  </body>
</html>